# Employee info
class Employee:
    def __init__(self, id, importance, subordinates):
        # It's the unique id of each node.
        # unique id of this employee
        self.id = id
        # the importance value of this employee
        self.importance = importance
        # the id of direct subordinates
        self.subordinates = subordinates
class Solution:
    def getImportance(self, employees, id):
        """
        :type employees: Employee
        :type id: int
        :rtype: int
        """
        tree=self.build_tree(employees, id)
        return self.dfs(tree,id,False)

    def build_tree(self, data, id):
        root=None
        if data is None or len(data)==0:
            return None
        stack=[]        
        j=0
        while j<len(data):
            if data[j].id==id:
            # if data[j][0]==id:
                root=TreeNode(data[j].id,data[j].importance,None,None, data[j].subordinates)
                # root=TreeNode(data[j][0],data[j][1],None,None, data[j][2])
                del data[j]
                break
            j+=1

        stack.append(root)
        while len(stack)>0:
            cur=stack.pop()
            i=0

            if  cur.rawIds is None or len(cur.rawIds)==0:
                continue

            k=0
            while k<len(cur.rawIds):
                i=0
                while i<len(data):
                    # if len(cur.rawIds)>=1 and  data[i][0]==cur.rawIds[k]:
                    if len(cur.rawIds)>=1 and  data[i].id==cur.rawIds[k]:
                        node=TreeNode(data[i].id,data[i].importance,None,None,data[i].subordinates)
                        # node=TreeNode(data[i][0],data[i][1],None,None,data[i][2])
                        cur.under.append(node)
                        stack.append(node)
                        del data[i]
                    else:
                        i+=1
                k+=1
            
        return root
                
                    
    def dfs(self,node, startId, startCount):
        if node is None:
            return 0
        if node.id==startId:
            sm=node.val
            for i in node.under:
                sm+= self.dfs(i,startId, True)
            return sm
        elif startCount==False:
            for i in node.under:
                self.dfs(i,startId, False)
            return
        else:
            sm=node.val
            for i in node.under:
                sm+=self.dfs(i,startId, True)
            return sm

class TreeNode:
    def __init__(self, id, val, left, right, childrenIds):
        self.val=val
        self.id=id
        self.under=[]
        self.rawIds=childrenIds


if __name__ =="__main__":
    c=Solution()
    # print(c.getImportance([[1,2,[2]], [2,3,[]]],2)) #3
    print(c.getImportance([[1, 5, [2, 3]], [2, 3, []], [3, 3, []]],1)) #11
    print(c.getImportance([[2,5,[]]],2)) #5
    print(c.getImportance([[1,10,[2,3,4]], [2,-1,[]],[3,-2,[]],[4,-3,[]]],1)) #4
    print(c.getImportance([[1,5,[2,3]],[2,3,[4]],[3,4,[]],[4,1,[]]],2)) #4
    print(c.getImportance([[303,95,[304,308]],[365,98,[366]],[395,60,[396,398]],[856,82,[]],[622,89,[623]],[513,58,[]],[342,86,[]],[47,61,[]],[108,70,[109]],[605,71,[606,611]],[325,87,[]],[594,61,[595,599]],[45,86,[46,48]],[577,66,[578,649]],[540,93,[541,542]],[92,60,[93]],[722,52,[723]],[634,54,[635]],[398,50,[399]],[520,75,[521,525]],[511,85,[512]],[385,71,[]],[203,89,[]],[180,57,[181,186]],[559,60,[]],[222,92,[223,233]],[636,54,[637]],[13,69,[]],[356,90,[]],[97,78,[98,99]],[569,59,[570,571]],[322,59,[323,330]],[362,53,[363,371]],[870,71,[871,872]],[377,86,[378,379]],[275,62,[]],[19,76,[20,21]],[36,57,[]],[707,53,[708]],[860,77,[861]],[755,79,[756,757]],[396,82,[397]],[218,85,[]],[71,83,[72]],[421,74,[]],[680,69,[]],[835,63,[836]],[188,89,[189]],[308,59,[309]],[50,70,[51,88]],[525,98,[526,690]],[635,54,[]],[653,81,[654]],[311,57,[]],[483,88,[484]],[363,93,[364]],[178,84,[]],[873,60,[874]],[369,81,[370]],[288,76,[289,459]],[286,64,[287,467]],[563,75,[]],[688,96,[689]],[271,94,[272,273]],[495,55,[496]],[665,58,[666,671]],[857,87,[858,859]],[107,64,[108,110]],[330,51,[]],[117,85,[118]],[558,62,[559]],[328,74,[329]],[284,86,[285]],[386,54,[387]],[361,88,[]],[255,78,[256,270]],[726,98,[727]],[532,58,[]],[823,77,[]],[932,89,[]],[633,75,[]],[845,55,[846]],[663,74,[]],[561,99,[562]],[805,82,[806,807]],[237,83,[238,253]],[269,63,[]],[502,86,[503]],[422,75,[423]],[474,80,[]],[903,95,[904,906]],[456,80,[457,458]],[476,60,[477,478]],[477,61,[]],[822,66,[823]],[466,54,[]],[316,50,[317,318]],[750,88,[751,752]],[620,83,[]],[865,92,[]],[745,76,[]],[717,66,[718]],[571,51,[]],[449,61,[450]],[312,91,[]],[195,53,[196,201]],[142,62,[]],[672,67,[]],[131,92,[132,773]],[345,90,[346,358]],[580,55,[581,582]],[55,95,[]],[629,96,[630,636]],[215,76,[]],[374,77,[]],[260,52,[261]],[120,98,[121]],[765,95,[]],[5,96,[]],[9,95,[10,898]],[716,61,[717,754]],[602,87,[]],[695,95,[]],[262,62,[]],[169,89,[]],[926,74,[927]],[394,71,[395,400]],[506,84,[]],[938,83,[939]],[820,74,[821,822]],[804,99,[805,810]],[649,85,[650]],[787,66,[788,790]],[455,86,[456]],[606,74,[607]],[827,96,[828,878]],[867,82,[868,873]],[572,52,[573]],[730,67,[]],[190,70,[]],[754,51,[]],[788,82,[789]],[871,88,[]],[232,88,[]],[850,99,[]],[360,83,[]],[519,81,[520,695]],[100,60,[101]],[902,60,[903,912]],[550,64,[]],[658,62,[659,660]],[175,89,[176,179]],[667,86,[668]],[641,75,[642]],[479,95,[480,488]],[106,83,[]],[185,92,[]],[403,81,[404]],[15,54,[16,895]],[407,89,[408]],[909,63,[]],[600,68,[601,602]],[212,85,[]],[229,88,[230]],[250,99,[251]],[545,82,[546,547]],[60,93,[61]],[889,79,[890]],[846,93,[847]],[279,88,[]],[164,92,[165,169]],[63,54,[64]],[894,73,[]],[612,85,[613,639]],[296,69,[297]],[681,84,[]],[844,83,[845,849]],[738,51,[739,740]],[619,52,[620]],[507,67,[508,509]],[723,62,[724]],[329,80,[]],[836,72,[]],[112,73,[113,114]],[170,80,[171]],[281,68,[282,755]],[508,55,[]],[809,94,[]],[58,83,[59]],[595,81,[596,598]],[238,98,[239,252]],[510,97,[511,705]],[391,85,[392]],[631,52,[632,633]],[592,77,[593]],[837,73,[838,841]],[236,71,[237]],[144,55,[145,208]],[728,73,[729]],[302,65,[303]],[782,88,[]],[937,58,[]],[206,80,[207]],[52,65,[53,62]],[876,61,[877]],[869,69,[870]],[231,86,[]],[358,68,[359,361]],[405,86,[406,432]],[102,76,[103]],[564,93,[565]],[211,63,[212,213]],[29,90,[]],[249,51,[]],[440,70,[441,442]],[20,80,[]],[504,87,[505]],[357,58,[]],[388,78,[389,391]],[596,99,[597]],[321,53,[]],[412,57,[413]],[458,60,[]],[8,98,[9,938]],[193,79,[194,195]],[155,90,[156,157]],[797,54,[798]],[890,85,[891]],[733,90,[734]],[83,70,[]],[808,68,[809]],[197,97,[]],[746,68,[747]],[373,89,[374,375]],[925,80,[]],[234,62,[235]],[129,64,[]],[39,51,[]],[453,58,[454]],[172,98,[173,175]],[740,57,[]],[742,82,[743]],[189,72,[190]],[445,94,[446,447]],[165,91,[166]],[583,56,[584]],[927,52,[928,937]],[674,61,[]],[317,82,[]],[76,75,[]],[578,69,[579,646]],[276,74,[]],[906,71,[907,910]],[648,76,[]],[305,84,[]],[551,68,[552]],[790,95,[]],[828,79,[829]],[514,84,[515,701]],[543,87,[544,572]],[450,50,[451]],[163,84,[164,170]],[141,68,[142,143]],[307,78,[]],[610,100,[]],[136,77,[137,138]],[744,92,[745]],[432,95,[]],[393,75,[394,401]],[89,75,[90]],[574,89,[]],[542,92,[543]],[538,81,[]],[701,54,[702,703]],[416,68,[417,419]],[57,95,[]],[480,92,[481,487]],[552,92,[553]],[31,76,[32]],[209,83,[210,216]],[439,95,[440]],[670,63,[]],[775,52,[]],[843,69,[844]],[415,93,[416]],[834,94,[835,837]],[939,83,[]],[491,61,[492]],[760,98,[761]],[75,56,[76]],[553,51,[]],[200,94,[]],[615,53,[616,626]],[625,92,[]],[473,74,[474]],[298,74,[299,313]],[719,92,[720]],[784,100,[785]],[115,76,[]],[431,89,[]],[292,98,[293,373]],[51,86,[52,79]],[557,52,[]],[752,69,[753]],[54,83,[55]],[748,86,[]],[148,64,[149,150]],[239,100,[240,241]],[333,52,[334]],[268,66,[]],[585,54,[586]],[679,87,[680,681]],[339,91,[340]],[411,59,[412]],[282,74,[283,284]],[854,67,[855,856]],[778,96,[779]],[891,76,[]],[565,61,[566]],[526,77,[527,575]],[537,56,[]],[547,83,[548,551]],[715,70,[716]],[789,50,[]],[464,89,[465,466]],[917,80,[918,919]],[814,74,[815]],[371,80,[372]],[731,50,[732,749]],[589,74,[]],[879,88,[880]],[609,56,[]],[452,50,[]],[199,76,[]],[78,77,[]],[168,83,[]],[780,81,[781,783]],[931,92,[932,933]],[33,63,[34]],[527,97,[528,540]],[915,67,[]],[599,55,[600,603]],[171,50,[172,187]],[584,77,[585,589]],[929,99,[]],[700,62,[]],[868,75,[869]],[567,53,[568]],[381,82,[382,455]],[414,64,[415]],[424,63,[]],[691,73,[692]],[536,54,[537]],[900,100,[901,914]],[851,66,[852]],[233,100,[234]],[32,98,[33,36]],[130,74,[]],[603,69,[604,645]],[465,54,[]],[289,52,[290]],[153,80,[154]],[437,61,[]],[785,94,[]],[223,51,[224]],[467,58,[468]],[535,66,[536]],[224,52,[225,232]],[259,61,[260,264]],[590,87,[591,592]],[475,65,[476,714]],[293,54,[294,362]],[327,96,[328]],[438,87,[439]],[773,88,[774]],[521,89,[522]],[756,86,[]],[122,97,[]],[134,56,[]],[702,62,[]],[485,84,[486]],[469,64,[470]],[245,94,[]],[46,73,[47]],[382,91,[383,384]],[96,59,[97,102]],[772,62,[]],[202,96,[203,204]],[637,67,[]],[146,99,[147]],[570,87,[]],[878,81,[]],[16,59,[17,18]],[323,67,[324]],[387,59,[388,436]],[763,58,[764,765]],[248,71,[]],[451,88,[452,453]],[138,74,[139,218]],[488,95,[489,712]],[326,73,[327]],[735,55,[736]],[433,92,[434,435]],[655,94,[]],[406,82,[407,425]],[799,89,[]],[184,96,[]],[598,56,[]],[37,76,[]],[686,100,[687]],[714,82,[715]],[524,70,[]],[623,97,[624]],[816,87,[817,818]],[922,96,[923,924]],[884,76,[885]],[859,82,[]],[528,94,[529,530]],[252,64,[]],[309,75,[310,311]],[67,91,[]],[791,91,[792]],[568,100,[]],[335,59,[]],[2,80,[3,6]],[128,70,[129,130]],[158,82,[159,191]],[687,90,[688]],[1,55,[2,940]],[751,83,[]],[376,93,[377]],[119,96,[]],[546,86,[]],[320,82,[321,322]],[727,100,[728]],[194,64,[]],[133,81,[134,135]],[154,59,[155]],[734,81,[735,746]],[621,77,[622]],[683,97,[]],[114,65,[115,116]],[91,89,[92]],[59,88,[60]],[354,80,[355]],[781,88,[782]],[554,63,[555,569]],[243,84,[]],[825,69,[]],[921,77,[]],[817,60,[]],[287,56,[288]],[392,90,[393,433]],[643,61,[]],[192,80,[193,205]],[724,54,[725]],[593,50,[594]],[435,55,[]],[487,79,[]],[484,66,[485]],[493,85,[494]],[607,74,[608]],[899,58,[900,921]],[685,76,[686]],[23,98,[24]],[68,74,[]],[481,52,[482]],[824,86,[825,826]],[866,76,[867]],[253,76,[254]],[210,74,[211,215]],[24,84,[25,39]],[662,68,[663]],[177,53,[]],[831,95,[832,857]],[739,70,[]],[230,53,[231]],[505,60,[506]],[399,76,[]],[4,51,[5]],[849,72,[850,851]],[630,74,[631,634]],[332,79,[333]],[548,71,[549]],[41,100,[42,786]],[883,89,[884,886]],[512,90,[513,514]],[499,72,[500]],[444,96,[445,449]],[198,66,[199,200]],[324,61,[325,326]],[747,69,[748]],[864,55,[865]],[370,70,[]],[699,78,[]],[515,53,[516,700]],[579,80,[580,590]],[143,60,[]],[853,82,[]],[533,81,[534,538]],[278,57,[279,280]],[442,99,[443]],[806,83,[]],[84,66,[]],[221,96,[222,767]],[645,68,[]],[443,81,[444]],[721,90,[]],[764,86,[]],[181,99,[182,185]],[608,95,[609,610]],[923,86,[]],[771,100,[772]],[914,74,[915,916]],[549,80,[550]],[95,58,[]],[913,81,[]],[366,75,[367,369]],[468,57,[469]],[601,51,[]],[659,93,[]],[310,78,[]],[429,78,[430]],[694,76,[]],[123,80,[124,125]],[669,68,[]],[226,85,[]],[94,92,[95,96]],[640,82,[641,644]],[586,61,[587]],[53,73,[54,56]],[72,76,[]],[462,67,[463,464]],[897,87,[]],[73,95,[74,78]],[736,60,[737,741]],[838,100,[839]],[501,94,[]],[151,62,[]],[676,56,[677]],[573,78,[574]],[677,63,[678,679]],[6,83,[7,8]],[242,73,[243,244]],[696,57,[]],[770,81,[771]],[617,54,[618,621]],[933,90,[934]],[235,52,[236]],[460,57,[461]],[560,78,[561,564]],[800,64,[801]],[88,88,[89,776]],[862,53,[]],[246,64,[247]],[492,78,[493,495]],[792,83,[793,803]],[85,68,[86,87]],[430,74,[]],[400,87,[]],[839,85,[840]],[872,84,[]],[217,93,[]],[919,63,[920]],[147,90,[148]],[341,91,[342]],[626,54,[]],[295,76,[296,336]],[684,53,[]],[704,86,[]],[228,92,[]],[539,76,[]],[503,58,[504,507]],[187,81,[]],[918,65,[]],[162,59,[]],[666,62,[667]],[848,92,[]],[624,98,[625]],[774,92,[775]],[516,91,[517,697]],[331,66,[332]],[819,53,[820]],[196,75,[197,198]],[644,68,[]],[334,50,[335]],[304,59,[305,306]],[710,58,[711]],[904,50,[905]],[313,84,[314]],[798,94,[799]],[121,53,[122]],[934,71,[]],[767,53,[]],[80,94,[81,85]],[708,53,[709]],[901,52,[902,913]],[706,88,[]],[240,92,[]],[472,85,[473,475]],[768,74,[]],[137,76,[]],[216,95,[217]],[35,93,[]],[319,99,[]],[86,60,[]],[761,100,[]],[219,97,[220,769]],[534,96,[535]],[703,90,[704]],[597,71,[]],[647,70,[648]],[280,75,[281]],[531,80,[532,533]],[27,85,[28,38]],[350,61,[351]],[803,83,[804]],[497,59,[498,710]],[18,51,[19]],[587,73,[588]],[10,68,[11]],[496,80,[497]],[818,53,[819,824]],[826,80,[827,879]],[401,73,[402]],[588,97,[]],[183,71,[]],[776,67,[777]],[378,92,[]],[318,86,[319,320]],[272,90,[]],[920,60,[]],[104,53,[105,111]],[575,91,[576,685]],[678,57,[]],[829,84,[830]],[149,68,[]],[179,53,[180]],[907,55,[908]],[830,58,[831,860]],[616,71,[617]],[166,90,[167]],[61,55,[]],[478,57,[479]],[30,93,[31,37]],[852,94,[853,854]],[257,72,[258]],[167,81,[168]],[833,60,[834,843]],[692,62,[]],[562,98,[563]],[940,77,[]],[301,89,[302]],[132,56,[133,219]],[160,77,[161,188]],[384,78,[385,386]],[673,61,[674]],[213,75,[214]],[436,99,[437,438]],[813,94,[814,881]],[425,64,[426,428]],[855,58,[]],[174,63,[]],[446,85,[]],[705,58,[706]],[397,50,[]],[227,77,[228,229]],[139,57,[140,209]],[690,81,[691,693]],[769,91,[770]],[118,82,[119]],[12,67,[13,14]],[352,84,[]],[895,100,[896]],[379,59,[380,381]],[783,66,[784]],[523,53,[]],[628,70,[629,638]],[17,90,[]],[26,99,[]],[256,79,[257,269]],[410,58,[411,414]],[44,73,[45]],[801,94,[802]],[428,57,[429,431]],[205,78,[]],[541,84,[]],[766,54,[]],[343,76,[344]],[885,96,[]],[530,56,[531,539]],[214,72,[]],[500,76,[501]],[709,74,[]],[908,85,[909]],[290,81,[291]],[270,92,[271,759]],[759,77,[760,762]],[14,51,[15]],[924,88,[925,926]],[720,84,[721,722]],[241,89,[242,250]],[254,71,[255,766]],[109,89,[]],[664,78,[665]],[69,53,[70,73]],[266,50,[]],[682,59,[683,684]],[152,69,[153]],[125,65,[126,127]],[930,70,[931,935]],[581,65,[]],[916,84,[917]],[419,86,[]],[498,71,[499,502]],[447,58,[448]],[220,79,[221,768]],[110,95,[]],[793,77,[794,795]],[893,74,[894]],[842,75,[]],[522,80,[523,524]],[632,67,[]],[807,71,[808]],[105,76,[106,107]],[861,93,[862,863]],[402,59,[403,405]],[712,96,[713]],[928,99,[929,930]],[82,58,[83]],[294,74,[295,345]],[77,85,[]],[64,78,[]],[79,55,[80]],[265,91,[266,267]],[65,76,[66,69]],[911,74,[]],[161,94,[162,163]],[22,61,[23,40]],[566,59,[567]],[611,90,[612]],[413,83,[]],[116,78,[117,120]],[11,88,[12]],[93,76,[94]],[348,88,[349,357]],[70,88,[71]],[486,83,[]],[671,69,[672]],[375,83,[]],[556,92,[557,558]],[423,92,[424]],[489,80,[490,491]],[459,99,[460,462]],[482,62,[483]],[113,75,[]],[832,94,[833]],[794,88,[]],[264,90,[265,268]],[650,71,[651,652]],[886,56,[]],[490,59,[]],[389,81,[390]],[157,64,[158]],[340,56,[341,343]],[355,89,[]],[347,87,[]],[880,51,[]],[7,78,[]],[461,83,[]],[208,70,[]],[811,93,[]],[654,80,[655,656]],[888,66,[889,892]],[795,67,[796,800]],[812,97,[]],[642,84,[643]],[420,85,[421]],[529,90,[]],[111,82,[112,123]],[28,65,[29,30]],[38,61,[]],[338,66,[]],[101,79,[]],[646,97,[647]],[463,88,[]],[896,73,[897]],[656,77,[657]],[517,60,[518]],[713,76,[]],[261,64,[262,263]],[777,68,[]],[173,65,[174]],[349,76,[350,353]],[156,84,[]],[186,77,[]],[758,76,[]],[34,74,[35]],[25,96,[26,27]],[858,74,[]],[604,68,[605]],[150,62,[151]],[518,84,[519,696]],[627,86,[628]],[344,82,[]],[263,57,[]],[336,79,[337]],[737,65,[738]],[74,71,[75,77]],[847,73,[848]],[882,88,[883]],[346,54,[347,348]],[159,99,[160]],[729,73,[730,731]],[661,71,[662,664]],[124,62,[]],[367,61,[368]],[874,80,[875,876]],[741,59,[742]],[875,97,[]],[283,56,[]],[258,90,[259]],[749,79,[750]],[614,71,[615,627]],[753,71,[]],[434,67,[]],[56,95,[57,58]],[881,78,[882,887]],[409,85,[410,420]],[840,80,[]],[315,81,[316,331]],[291,93,[292,376]],[351,93,[352]],[300,88,[301]],[668,85,[669,670]],[48,96,[49]],[935,100,[936]],[274,58,[275,276]],[689,85,[]],[660,73,[661,673]],[207,50,[]],[427,80,[]],[418,90,[]],[417,82,[418]],[732,75,[733]],[66,64,[67,68]],[408,85,[409,422]],[176,80,[177,178]],[877,69,[]],[912,67,[]],[725,98,[726]],[383,60,[]],[182,96,[183,184]],[697,76,[698,699]],[244,88,[245,246]],[21,56,[22,813]],[786,59,[787,791]],[544,67,[545,554]],[936,85,[]],[201,77,[202]],[191,77,[192,206]],[470,74,[]],[796,65,[797]],[126,89,[]],[306,100,[307]],[821,83,[]],[743,55,[744]],[779,80,[780]],[905,52,[]],[372,59,[]],[651,68,[]],[718,92,[719]],[711,57,[]],[509,87,[510,707]],[359,99,[360]],[555,100,[556,560]],[802,82,[]],[90,82,[91]],[368,54,[]],[441,58,[]],[426,88,[427]],[127,60,[128]],[638,87,[]],[98,71,[]],[42,61,[43,44]],[135,50,[136]],[591,93,[]],[251,50,[]],[277,78,[278,758]],[841,59,[842]],[613,95,[614]],[204,60,[]],[404,75,[]],[762,76,[763]],[297,96,[298,315]],[582,51,[583]],[757,72,[]],[267,100,[]],[3,96,[4]],[353,96,[354,356]],[471,72,[472]],[299,72,[300,312]],[576,66,[577,682]],[62,99,[63,65]],[225,62,[226,227]],[618,53,[619]],[652,95,[653,676]],[863,62,[864,866]],[887,64,[888]],[892,62,[893]],[43,100,[]],[103,94,[104,131]],[494,67,[]],[247,69,[248,249]],[448,65,[]],[910,90,[911]],[145,89,[146,152]],[87,87,[]],[140,100,[141,144]],[40,53,[41]],[675,77,[]],[454,56,[]],[457,88,[]],[364,57,[365]],[639,72,[640]],[314,88,[]],[99,77,[100]],[810,76,[811,812]],[898,69,[899,922]],[285,93,[286,471]],[81,62,[82,84]],[49,68,[50,778]],[273,95,[274,277]],[693,91,[694]],[657,90,[658,675]],[380,53,[]],[390,53,[]],[815,69,[816]],[337,59,[338,339]],[698,79,[]]],45)) #4